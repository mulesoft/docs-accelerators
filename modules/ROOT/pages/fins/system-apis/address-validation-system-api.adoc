= FINS Address Validation System API

This asset is a component of the https://www.mulesoft.com/exchange/org.mule.examples/mulesoft-accelerator-for-financial-services/[MuleSoft Accelerator for Financial Services^], which accelerates the implementation of essential integration use cases.

[cols="10,90"]
|===
| image:https://www.mulesoft.com/ext/solutions/draft/images/bulb.png[bulb.png]
| The xref:../../getting-started.adoc[Getting started guide] provides general information on getting started with the accelerator components. This includes instructions on setting up your local workstation for configuring and deploying the applications.
|===

== Summary

The FINS Address Validation System API supports the following functionalities:

* Validates a postal addresses by integrating with USPS Shipping API

== Using this Asset

The implementation template for this API can be imported directly into Anypoint Studio from Exchange. Ensure the required prerequisites are available and the mandatory property overrides are in place before attempting to run or deploy the application.

=== Anypoint Exchange Assets

* https://anypoint.mulesoft.com/exchange/org.mule.examples/fins-address-validation-sys-api-spec/[API Specification^]
* https://anypoint.mulesoft.com/exchange/org.mule.examples/fins-address-validation-sys-api/[Implementation Template^]

=== Prerequisite Setup

This System API relies on USPS Web Tools Application Programming Interface to validate US addresses. Use https://registration.shippingapis.com/[this link^] to register for the USPS Web Tool API. Once registered, configure the validation service as per the instructions provided. The `fins-address-validation-sys-api.username` property must then be overridden with the username obtained over the email.

=== Mandatory Property Overrides

At a minimum, the following properties must be customized to reflect the target deployment environment before attempting to run or deploy the application.

[%header%autowidth.spread]
|===
| Property Name | Description
| `api.autodiscoveryID` | Required if using API Manager to secure this API
| `fins-address-validation-sys-api.host` | USPS Shipping API host name
| `fins-address-validation-sys-api.port` | USPS Shipping API port
| `fins-address-validation-sys-api.username` | Username that is used to register in the USPS Shipping API
|===

== Data Mappings

This document provides information generated from the DataWeave scripts included in the project, such as function definitions, variable definitions, and data mapping tables.

=== postal-address-validation-usps-request

Mapping of a single ContactPointAddress to XML format that is used by USPS WebTools API to validate US Postal Address.
USPS WebTools API takes XML input of address as a query parameter and this transforms creates the XML

> Source: `./src/main/resources/dwl/postal-address-validation-usps-request.dwl`

==== Mapping Tables

Maps ContactPointAddress JSON of CIM to an XML format that is accepted by the USPS Web Tools API (ShippingAPI)

|===
| CIM Spec field | USPS XML Field used by Web Tools API | Description

| addressLine1
| Address2
| addressLine1 is mapped to Address2 field as its the main field needed for validation that holds house and street number

| addressLine2
| Address1
| addressLine2 is mapped to Address1 and its the unit or apartment number

| cityName
| City
| city of the address

| stateProvinceName
| State
| State code of the address (abbreviated 2 chars)

| postalCodeText
| Zip5
| 5 Digit Zip Code for the address
|===

== See Also

* xref:../../getting-started.adoc[Getting Started]
* xref:/fins/fins-landing-page.adoc[MuleSoft Accelerator for Financial Services]
